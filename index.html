<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="canvas"></div>
    <script src="three.js"></script>
    <script src="OrbitControls.js"></script>
    <script src="GLTFLoader.js"></script>
<script>

let now = new Date();
let hour = now.getHours();
let minute = now.getMinutes();
let second = now.getSeconds();

// let myCanvas = document.getElementById('canvas');

let scene = new THREE.Scene();

// let renderer = new THREE.WebGLRenderer({canvas:myCanvas});
let renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.setClearColor(0x8e40088);
renderer.setPixelRatio(window.devicePixelRatio);
document.getElementById('canvas').appendChild(renderer.domElement)
let light = new THREE.AmbientLight();
scene.add(light);

let camere = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1000);
camere.position.z=10;

new THREE.OrbitControls(camere,renderer.domElement);

let loader = new THREE.GLTFLoader();

let fig_hour;
let fig_minute;
let fig_second;

let clock = new THREE.Clock();

loader.load(
    'clocks.glb',
    (glb)=>{
        glb.scene.traverse(function(child){
            if(child.name=='houre'){
                fig_hour = child;
                child.rotation.z=((hour * Math.PI/6) + (minute * Math.PI/(6 * 60)) + (second * Math.PI/(360/60))) * -1;
            }
            if(child.name=='minute'){
                fig_minute = child;
                child.rotation.z=((minute * Math.PI/(6 * 60)) + (second * Math.PI/(360/60))) * -1;
            }
            if(child.name=='second'){
                fig_second = child;
                child.rotation.z=( (second * Math.PI/(360/60))) * -1;
            }
        })
        scene.add(glb.scene);
        animate();
    }
)
renderer.render(scene,camere);
let animate = function(){
    requestAnimationFrame(animate);
    let delta = clock.getDelta();
    if(camere){
        fig_second.rotation.z +=(delta * Math.PI / 30) * -1;
        fig_minute.rotation.z +=((delta/60) * Math.PI / 30) * -1;
        fig_minute.rotation.z +=(((delta/60)/60) * Math.PI / 30) * -1;
        renderer.render(scene,camere);
    }
}
    </script>
    
</body>
</html>